<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ù…ØªÙ† - Ø§Ø¨Ø²Ø§Ø± Ø±Ù…Ø²Ú¯Ø°Ø§Ø±ÛŒ Ù…ØªÙ†</title>
        <link rel="stylesheet" href="css/style-hack.css">

</head>
<body>
    <div class="container" style="margin-top: 3rem">
        <h1>ğŸ”“ Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ù…ØªÙ†</h1>
        
        <div class="nav-buttons">
            <a href="index.html" class="nav-btn" onclick="goHome()">ğŸ  Ø®Ø§Ù†Ù‡</a>
            <a href="encrypt.html" class="nav-btn" onclick="goToEncrypt()">ğŸ”’ ØµÙØ­Ù‡ Ø±Ù…Ø²Ú¯Ø°Ø§Ø±ÛŒ</a>
        </div>

        <div class="input-section">
            <div class="section-title">
                <span>ğŸ”</span>
                <span>Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Base64)</span>
            </div>
            <textarea id="encryptedText" placeholder="Ù…ØªÙ† Ú©Ø¯Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Base64 Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯..."></textarea>
            <div class="button-group">
                <button class="action-btn" onclick="decryptText()">ğŸ”“ Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ</button>
                <button class="action-btn clear-btn" onclick="clearInput()">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
            </div>
        </div>

        <div class="output-section">
            <div class="section-title">
                <span>ğŸ“</span>
                <span>Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø´Ø¯Ù‡</span>
            </div>
            <div id="decryptedText" class="result-box">Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø´Ø¯Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ø¸Ø§Ù‡Ø± Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯...</div>
            <div class="button-group">
                <button class="action-btn copy-btn" onclick="copyDecrypted()">ğŸ“‹ Ú©Ù¾ÛŒ Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø´Ø¯Ù‡</button>
            </div>
            <div id="successMessage" class="success-message"></div>
            <div id="errorMessage" class="error-message"></div>
        </div>
    </div>

    <script>
        function decryptText() {
            const encryptedText = document.getElementById('encryptedText').value;
            const decryptedTextDiv = document.getElementById('decryptedText');
            
            if (!encryptedText.trim()) {
                showError('Ù„Ø·ÙØ§Ù‹ Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
                return;
            }
            
            try {
                const decoded = decodeURIComponent(escape(atob(encryptedText.trim())));
                decryptedTextDiv.textContent = decoded;
                showSuccess('Ù…ØªÙ† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø´Ø¯!');
                hideError();
            } catch (error) {
                decryptedTextDiv.textContent = 'Ø®Ø·Ø§: ÙØ±Ù…Øª Base64 Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø±Ø§Ø¨';
                showError('Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ù…ØªÙ† Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ù…ØªÙ† Ú©Ø¯Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Base64 Ù…Ø¹ØªØ¨Ø±ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.');
                console.error('Decryption error:', error);
            }
        }

        function copyDecrypted() {
            const decryptedText = document.getElementById('decryptedText').textContent;
            
            if (decryptedText === 'Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø´Ø¯Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ø¸Ø§Ù‡Ø± Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯...' || decryptedText.startsWith('Ø®Ø·Ø§:')) {
                // alert('Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø´Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯. Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ù…ØªÙ†ÛŒ Ø±Ø§ Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ú©Ù†ÛŒØ¯.');
                return;
            }
            
            navigator.clipboard.writeText(decryptedText).then(() => {
                showSuccess('Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø´Ø¯Ù‡ Ø¯Ø± Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯ Ú©Ù¾ÛŒ Ø´Ø¯!');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = decryptedText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showSuccess('Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø´Ø¯Ù‡ Ø¯Ø± Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯ Ú©Ù¾ÛŒ Ø´Ø¯!');
            });
        }

        function clearInput() {
            document.getElementById('encryptedText').value = '';
            document.getElementById('decryptedText').textContent = 'Ù…ØªÙ† Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø´Ø¯Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ø¸Ø§Ù‡Ø± Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯...';
            hideSuccess();
            hideError();
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            setTimeout(() => {
                hideSuccess();
            }, 3000);
        }

        function hideSuccess() {
            document.getElementById('successMessage').style.display = 'none';
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                hideError();
            }, 5000);
        }

        function hideError() {
            document.getElementById('errorMessage').style.display = 'none';
        }

        function goHome() {
            // In a real implementation, this would navigate to index.html
            // alert('Navigate to index.html to go to the home page');
        }

        function goToEncrypt() {
            // In a real implementation, this would navigate to encrypt.html
            // alert('Navigate to encrypt.html to go to the encrypt page');
        }

        // Allow Enter key to trigger decryption
        document.getElementById('encryptedText').addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.key === 'Enter') {
                decryptText();
            }
        });
    </script>
</body>
</html>